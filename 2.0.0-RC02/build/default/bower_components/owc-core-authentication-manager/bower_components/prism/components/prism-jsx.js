(function(a){var b=a.util.clone(a.languages.javascript);a.languages.jsx=a.languages.extend('markup',b),a.languages.jsx.tag.pattern=/<\/?[\w.:-]+\s*(?:\s+(?:[\w.:-]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s{'">=]+|\{(?:\{[^}]*\}|[^{}])+\}))?|\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}))*\s*\/?>/i,a.languages.jsx.tag.inside['attr-value'].pattern=/=(?!\{)(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">]+)/i,a.languages.insertBefore('inside','attr-name',{spread:{pattern:/\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}/,inside:{punctuation:/\.{3}|[{}.]/,'attr-value':/\w+/}}},a.languages.jsx.tag),a.languages.insertBefore('inside','attr-value',{script:{pattern:/=(\{(?:\{[^}]*\}|[^}])+\})/i,inside:{'script-punctuation':{pattern:/^=(?={)/,alias:'punctuation'},rest:a.languages.jsx},alias:'language-javascript'}},a.languages.jsx.tag);var c=function(e){return'string'===typeof e?e:'string'===typeof e.content?e.content:e.content.map(c).join('')},d=function(e){for(var f=[],g=0;g<e.length;g++){var h=e[g],j=!1;if('string'!==typeof h&&('tag'===h.type&&h.content[0]&&'tag'===h.content[0].type?'</'===h.content[0].content[0].content?0<f.length&&f[f.length-1].tagName===c(h.content[0].content[1])&&f.pop():'/>'===h.content[h.content.length-1].content||f.push({tagName:c(h.content[0].content[1]),openedBraces:0}):0<f.length&&'punctuation'===h.type&&'{'===h.content?f[f.length-1].openedBraces++:0<f.length&&0<f[f.length-1].openedBraces&&'punctuation'===h.type&&'}'===h.content?f[f.length-1].openedBraces--:j=!0),(j||'string'===typeof h)&&0<f.length&&0===f[f.length-1].openedBraces){var k=c(h);g<e.length-1&&('string'===typeof e[g+1]||'plain-text'===e[g+1].type)&&(k+=c(e[g+1]),e.splice(g+1,1)),0<g&&('string'===typeof e[g-1]||'plain-text'===e[g-1].type)&&(k=c(e[g-1])+k,e.splice(g-1,1),g--),e[g]=new a.Token('plain-text',k,null,k)}h.content&&'string'!==typeof h.content&&d(h.content)}};a.hooks.add('after-tokenize',function(e){'jsx'!==e.language&&'tsx'!==e.language||d(e.tokens)})})(Prism);