if("--expose-gc"!==process.execArgv[0]){console.error("please run with node --expose-gc");process.exit(1)}var async=require("../");global.gc();var startMem=process.memoryUsage().heapUsed;function waterfallTest(cb){for(var functions=[],i=0;1e4>i;i++){functions.push(function(next){async.waterfall([function(cb){return cb()},function(callback){callback()},function(cb){return cb()}],next)})}async.parallel(functions,cb)}function reportMemory(){global.gc();var increase=process.memoryUsage().heapUsed-startMem;console.log("memory increase: "+ +(increase/1024).toPrecision(3)+"kB")}waterfallTest(function(){setTimeout(reportMemory,0)});